<form class="new-meeting-form" [formGroup]="newMeetingForm" #ngForm="ngForm">

    <h1>New Meeting</h1>

    <div [ngClass]="{
        'required-field': !newMeetingForm.get('title')?.valid && (ngForm.submitted || newMeetingForm.get('title')?.dirty || newMeetingForm.get('title')?.touched)
        }">
        <label>Title</label>
        <br />
        <input type="text" name="title" id="title" formControlName="title" />
        <div class="error-container">
            <small class="error hide-by-default">Please enter a meeting title.</small>
        </div>
    </div>

    <div [ngClass]="{
        'required-field': !newMeetingForm.get('startDateTime')?.valid && (ngForm.submitted || newMeetingForm.get('startDateTime')?.dirty || newMeetingForm.get('startDateTime')?.touched)
        }">
        <label>Date and time</label>
        <br />
        <input type="datetime-local" name="startDateTime" id="startDateTime"
            formControlName="startDateTime" /><label>{{userTZ}}</label>
        <div class="error-container">
            <small class="error hide-by-default">Please enter a valid date and starting time.</small>
        </div>
    </div>

    <div [ngClass]="{
        'required-field': !newMeetingForm.get('duration')?.valid && (ngForm.submitted || newMeetingForm.get('duration')?.dirty || newMeetingForm.get('duration')?.touched)
        }">
        <label>Duration</label>
        <br />
        <input type="number" step=5 name="duration" id="duration" formControlName="duration" /><label>minutes</label>
        <div class="error-container">
            <small class="error hide-by-default">Please enter a meeting duration (5-120 minutes)</small>
        </div>
    </div>

    <div [ngClass]="{
        'required-field': !newMeetingForm.get('password')?.valid && (ngForm.submitted || newMeetingForm.get('password')?.dirty || newMeetingForm.get('password')?.touched)
        }">
        <label>Password</label>
        <br />
        <input type="text" name="password" id="password" formControlName="password" />
        <div class="error-container">
            <small class="error hide-by-default">Please enter a password (8 - 60 characters)</small>
        </div>
    </div>

    <label>Invite Guests</label>
    <br />
    <input type="email" [(ngModel)]="guest" [ngModelOptions]="{standalone: true}" name="guest"
        (input)="guestError = ''" /><button (click)="addGuest($event)" class="btn-sm btn-primary">Add
        Guest</button>
    <br />
    <small class="error">{{guestError}}</small>
    <br />
    <div class="guests-container">
        <small *ngFor="let g of guests">{{g}}<button (click)="removeGuest($event, g)">x</button></small>
    </div>

    <br />
    <br />

    <button class="btn btn-primary" type="submit" (click)="onSubmit()">Create Meeting</button>
</form>
<app-modal [openModal]="showModal" modalTitle="Meeting Saved!"
    modalBody="Your meeting was saved. To view it, search for it on your calendar or select it from the list of upcoming meetings to the left.">
</app-modal>
<app-loading-wheel-overlay *ngIf="isLoading"></app-loading-wheel-overlay>