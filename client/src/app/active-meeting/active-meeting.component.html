<app-video [peer]="activeMeetingService.screenSharingPeer || activeMeetingService.speakingPeer" [size]="sizes.Speaker"
    [muted]="true"></app-video>
<div class="toolbar">
    <button class="toolbar-button" (click)="onToggleMicrophone()">
        <fa-icon [icon]="activeMeetingService.localPeer?.audioEnabled ? faMicrophone : faMicrophoneSlash"></fa-icon>
    </button>
    <button class="toolbar-button" (click)="onToggleVideo()">
        <fa-icon [icon]="activeMeetingService.localPeer?.videoEnabled ? faVideo : faVideoSlash"></fa-icon>
    </button>
    <button class="toolbar-button"
        (click)="!activeMeetingService.isSharingScreen ? activeMeetingService.shareScreen() : activeMeetingService.stopScreenShare()">
        <fa-icon [icon]="faDesktop"></fa-icon>
    </button>
    <button class="toolbar-button">
        <fa-icon [icon]="faMessage"></fa-icon>
    </button>
    <button class="toolbar-button" (click)="showSettingsModal=true">
        <fa-icon [icon]="faCog"></fa-icon>
    </button>
    <button class="toolbar-button" (click)="onLeaveOrClose()">
        <fa-icon [icon]="faSignOut"></fa-icon>
    </button>
</div>
<div class="thumbnails-container">
    <app-video [peer]="activeMeetingService.localPeer" [muted]="true"></app-video>
    <app-video *ngFor="let remotePeer of activeMeetingService.remotePeerList" [peer]="remotePeer"
        [muted]="false"></app-video>
</div>
<div class="messagesContainer">
    <div *ngFor="let message of activeMeetingService.messages" class="message" [ngClass]="{
        ownMessage : message.from == 'me'
    }"><span [innerHTML]="replaceLinksWithTags(message.text)"></span><small
            class="sender-name-text">{{message.from}}</small></div>
</div>
<div class="new-message-input-container">
    <textarea [(ngModel)]="newMessage" class="new-message-input" resize="none"></textarea>
    <button (click)="onSendMessage()" class="btn btn-primary new-message-button">Send To All</button>
</div>
<div class="settingsModalContainer" *ngIf="showSettingsModal">
    <div class="settingsModal">
        <h2>Settings</h2>
        <label>Microphone Input Level</label>
        <input type="range" [min]="0" [max]="1.5" [step]="0.1" (change)="onChangeMicLevel($event)"
            [value]="activeMeetingService.localPeer?.gain" />
        <br />
        <button (click)="showSettingsModal=false" class="btn btn-primary">Done</button>
    </div>
</div>